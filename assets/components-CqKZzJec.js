var p=Object.defineProperty;var h=(t,e,s)=>e in t?p(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var d=(t,e,s)=>h(t,typeof e!="symbol"?e+"":e,s);import{n,m as f,o as r,r as c,j as o,a as m}from"./vendor-TXcX_tYA.js";const x=[{id:n(),text:"Тестовое задание",completed:!1},{id:n(),text:"Прекрасный код",completed:!0},{id:n(),text:"Покрытие тестами",completed:!1}];class T{constructor(){d(this,"todos",x);d(this,"filter","all");d(this,"remaning",this.todos.filter(e=>!e.completed).length);f(this)}addTodo(e){e.trim()&&this.todos.push({id:n(),text:e,completed:!1})}toggleTodoCompletion(e){const s=this.todos.find(a=>a.id===e);s&&(s.completed=!s.completed)}clearCompleted(){this.todos=this.todos.filter(e=>!e.completed)}setFilter(e){this.filter=e}get remainingTodos(){return this.todos.filter(e=>!e.completed).length}get filteredTodos(){switch(this.filter){case"active":return this.todos.filter(e=>!e.completed);case"completed":return this.todos.filter(e=>e.completed);case"all":return this.todos;default:throw new Error("This filter is not exist in store")}}}const l=new T,w=r(()=>{const[t,e]=c.useState(""),s=c.useRef(null);c.useEffect(()=>{const i=u=>{s.current&&u.key.length===1&&s.current.focus()};return window.addEventListener("keydown",i),()=>{window.removeEventListener("keydown",i)}},[]);const a=i=>{i.trim()&&(l.addTodo(i),e(""))};return o.jsxs("form",{onSubmit:i=>{i.preventDefault(),a(t)},className:"add-todo",children:[o.jsx("input",{ref:s,type:"text",value:t,onChange:i=>e(i.target.value),placeholder:"What needs to be done?","data-testid":"form-input"}),o.jsx("button",{type:"submit","data-testid":"add-button",children:"Add"})]})}),b=r(({todo:t})=>{const e=s=>{l.toggleTodoCompletion(s)};return o.jsx("li",{className:"todo-item",children:o.jsxs("label",{children:[o.jsx("input",{type:"checkbox",checked:t.completed,onChange:()=>e(t.id)}),o.jsx("div",{className:"checkbox-wrapper"})," ",o.jsx("span",{style:{textDecoration:t.completed?"line-through":"none"},children:t.text})]})})}),k=m(()=>{const t=l.filteredTodos;return o.jsx("ul",{className:"todo-list",children:t.map(e=>o.jsx(b,{todo:e},e.id))})}),g=r(()=>{const t=l.remainingTodos;return o.jsxs("span",{"data-testid":"todos-counter",children:[t," items left"]})}),j=r(()=>o.jsxs("div",{className:"filters","data-testid":"filter-buttons-panel",children:[o.jsx("button",{className:l.filter==="all"?"active":"",onClick:()=>l.setFilter("all"),"data-testid":"filter-all-button",children:"All"}),o.jsx("button",{className:l.filter==="active"?"active":"",onClick:()=>l.setFilter("active"),"data-testid":"filter-active-button",children:"Active"}),o.jsx("button",{className:l.filter==="completed"?"active":"",onClick:()=>l.setFilter("completed"),"data-testid":"filter-completed-button",children:"Completed"})]})),N=m(()=>{const t=()=>{l.todos.length!==l.remainingTodos&&l.clearCompleted()};return o.jsxs("div",{className:"footer",children:[o.jsx(g,{}),o.jsx(j,{}),o.jsx("button",{onClick:t,className:"clear-completed","data-testid":"cleare-button",children:"Clear completed"})]})});export{w as F,k as T,N as a};
